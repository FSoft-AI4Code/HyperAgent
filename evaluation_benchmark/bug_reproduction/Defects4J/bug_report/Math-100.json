{"issue_id": "MATH-200", "title": "AbstractEstimator: getCovariances() and guessParametersErrors() crash when having bound parameters", "description": "\n<div class=\"user-content-block\">\n<p>the two methods getCovariances() and guessParametersErrors() from org.apache.commons.math.estimation.AbstractEstimator crash with ArrayOutOfBounds exception when some of the parameters are bound. The reason is that the Jacobian is calculated only for the unbound parameters. in the code you loop through all parameters.</p>\n<p>line #166: final int cols = problem.<b>getAllParameters()</b>.length;<br/>\nshould be replaced by:  final int cols = problem.<b>getUnboundParameters()</b>.length;<br/>\n(similar changes could be done in guessParametersErrors())</p>\n<p>the dissadvantage of the above bug fix is that what is returned to the user is an array with smaller size than the number of all parameters. Alternatively, you can have some logic in the code which writes zeros for the elements of the covariance matrix corresponding to the bound parameters</p>\n</div>\n"}