{"issue_id": "79", "title": "none standard PeriodType without year throws exception", "description": "\n<p dir=\"auto\">Hi.</p>\n<p dir=\"auto\">I tried to get a Period only for months and weeks with following code:</p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Period p = new Period(new DateTime(startDate.getTime()), new DateTime(endDate.getTime()), PeriodType.forFields(new DurationFieldType[]{DurationFieldType.months(), DurationFieldType.weeks()})).normalizedStandard(PeriodType.forFields(new DurationFieldType[]{DurationFieldType.months(), DurationFieldType.weeks()}));\nreturn p.getMonths();\"><pre><span class=\"pl-smi\">Period</span> <span class=\"pl-s1\">p</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">Period</span>(<span class=\"pl-k\">new</span> <span class=\"pl-smi\">DateTime</span>(<span class=\"pl-s1\">startDate</span>.<span class=\"pl-en\">getTime</span>()), <span class=\"pl-k\">new</span> <span class=\"pl-smi\">DateTime</span>(<span class=\"pl-s1\">endDate</span>.<span class=\"pl-en\">getTime</span>()), <span class=\"pl-s1\">PeriodType</span>.<span class=\"pl-en\">forFields</span>(<span class=\"pl-k\">new</span> <span class=\"pl-smi\">DurationFieldType</span>[]{<span class=\"pl-s1\">DurationFieldType</span>.<span class=\"pl-en\">months</span>(), <span class=\"pl-s1\">DurationFieldType</span>.<span class=\"pl-en\">weeks</span>()})).<span class=\"pl-en\">normalizedStandard</span>(<span class=\"pl-s1\">PeriodType</span>.<span class=\"pl-en\">forFields</span>(<span class=\"pl-k\">new</span> <span class=\"pl-smi\">DurationFieldType</span>[]{<span class=\"pl-s1\">DurationFieldType</span>.<span class=\"pl-en\">months</span>(), <span class=\"pl-s1\">DurationFieldType</span>.<span class=\"pl-en\">weeks</span>()}));\n<span class=\"pl-k\">return</span> <span class=\"pl-s1\">p</span>.<span class=\"pl-en\">getMonths</span>();</pre></div>\n<p dir=\"auto\">This throws following exception:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\" 10-17 14:35:50.999: E/AndroidRuntime(1350): java.lang.UnsupportedOperationException: Field is not supported\n 10-17 14:35:50.999: E/AndroidRuntime(1350): at org.joda.time.PeriodType.setIndexedField(PeriodType.java:690)\n 10-17 14:35:50.999: E/AndroidRuntime(1350): at org.joda.time.Period.withYears(Period.java:896) 10-17\n 14:35:50.999: E/AndroidRuntime(1350): at org.joda.time.Period.normalizedStandard(Period.java:1630)\"><pre class=\"notranslate\"><code> 10-17 14:35:50.999: E/AndroidRuntime(1350): java.lang.UnsupportedOperationException: Field is not supported\n 10-17 14:35:50.999: E/AndroidRuntime(1350): at org.joda.time.PeriodType.setIndexedField(PeriodType.java:690)\n 10-17 14:35:50.999: E/AndroidRuntime(1350): at org.joda.time.Period.withYears(Period.java:896) 10-17\n 14:35:50.999: E/AndroidRuntime(1350): at org.joda.time.Period.normalizedStandard(Period.java:1630)\n</code></pre></div>\n<p dir=\"auto\">Even removing the year component with .withYearsRemoved() throws the same exception:</p>\n<p dir=\"auto\">this works:</p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Period p = new Period(new DateTime(startDate.getTime()), new DateTime(endDate.getTime()), PeriodType.standard()).normalizedStandard(PeriodType.standard());\nreturn p.getMonths();\"><pre><span class=\"pl-smi\">Period</span> <span class=\"pl-s1\">p</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">Period</span>(<span class=\"pl-k\">new</span> <span class=\"pl-smi\">DateTime</span>(<span class=\"pl-s1\">startDate</span>.<span class=\"pl-en\">getTime</span>()), <span class=\"pl-k\">new</span> <span class=\"pl-smi\">DateTime</span>(<span class=\"pl-s1\">endDate</span>.<span class=\"pl-en\">getTime</span>()), <span class=\"pl-s1\">PeriodType</span>.<span class=\"pl-en\">standard</span>()).<span class=\"pl-en\">normalizedStandard</span>(<span class=\"pl-s1\">PeriodType</span>.<span class=\"pl-en\">standard</span>());\n<span class=\"pl-k\">return</span> <span class=\"pl-s1\">p</span>.<span class=\"pl-en\">getMonths</span>();</pre></div>\n<p dir=\"auto\">this fails:</p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Period p = new Period(new DateTime(startDate.getTime()), new DateTime(endDate.getTime()), PeriodType.standard().withYearsRemoved()).normalizedStandard(PeriodType.standard().withYearsRemoved());\nreturn p.getMonths();\"><pre><span class=\"pl-smi\">Period</span> <span class=\"pl-s1\">p</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">Period</span>(<span class=\"pl-k\">new</span> <span class=\"pl-smi\">DateTime</span>(<span class=\"pl-s1\">startDate</span>.<span class=\"pl-en\">getTime</span>()), <span class=\"pl-k\">new</span> <span class=\"pl-smi\">DateTime</span>(<span class=\"pl-s1\">endDate</span>.<span class=\"pl-en\">getTime</span>()), <span class=\"pl-s1\">PeriodType</span>.<span class=\"pl-en\">standard</span>().<span class=\"pl-en\">withYearsRemoved</span>()).<span class=\"pl-en\">normalizedStandard</span>(<span class=\"pl-s1\">PeriodType</span>.<span class=\"pl-en\">standard</span>().<span class=\"pl-en\">withYearsRemoved</span>());\n<span class=\"pl-k\">return</span> <span class=\"pl-s1\">p</span>.<span class=\"pl-en\">getMonths</span>();</pre></div>\n"}