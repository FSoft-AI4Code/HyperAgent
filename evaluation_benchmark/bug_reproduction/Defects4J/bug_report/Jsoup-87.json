{"issue_id": "1149", "title": "wrong parsing with ParseSettings.preserveCase", "description": "\n<p dir=\"auto\">jsoup version:1.11.3<br/>\nwhen using case sensitive settings,  parse wrong</p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content='public class TestJsoupParser {\n\n    public static void main(String[] args) {\n        Parser parser = Parser.htmlParser();\n        parser.settings(ParseSettings.preserveCase); // this line\n        String html = \"&lt;div class=\\\"bdsharebuttonbox\\\"&gt;\"\n                + \"&lt;A class=bds_more href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"more\\\"&gt;\u5206\u4eab\u5230\uff1a&lt;/A&gt;\"\n                + \"&lt;A title=\u5206\u4eab\u5230QQ\u7a7a\u95f4 class=bds_qzone href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"qzone\\\"&gt;\"\n                + \"&lt;/A&gt;&lt;A title=\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a class=bds_tsina href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"tsina\\\"&gt;&lt;/A&gt;\"\n                + \"&lt;A title=\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a class=bds_tqq href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"tqq\\\"&gt;&lt;/A&gt;\"\n                + \"&lt;A title=\u5206\u4eab\u5230\u4eba\u4eba\u7f51 class=bds_renren href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"renren\\\"&gt;&lt;/A&gt;\"\n                + \"&lt;A title=\u5206\u4eab\u5230\u5fae\u4fe1 class=bds_weixin href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"weixin\\\"&gt;&lt;/A&gt;\"\n                + \"&lt;/div&gt;\\r\\n\";\n        Document doc = Jsoup.parse(html, \"\", parser);\n        System.out.println(doc.html());\n    }\n    \n\n}'><pre><span class=\"pl-k\">public</span> <span class=\"pl-k\">class</span> <span class=\"pl-smi\">TestJsoupParser</span> {\n\n    <span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-smi\">void</span> <span class=\"pl-en\">main</span>(<span class=\"pl-smi\">String</span>[] <span class=\"pl-s1\">args</span>) {\n        <span class=\"pl-smi\">Parser</span> <span class=\"pl-s1\">parser</span> = <span class=\"pl-s1\">Parser</span>.<span class=\"pl-en\">htmlParser</span>();\n        <span class=\"pl-s1\">parser</span>.<span class=\"pl-en\">settings</span>(<span class=\"pl-smi\">ParseSettings</span>.<span class=\"pl-s1\">preserveCase</span>); <span class=\"pl-c\">// this line</span>\n        <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">html</span> = <span class=\"pl-s\">\"&lt;div class=\\\"bdsharebuttonbox\\\"&gt;\"</span>\n                + <span class=\"pl-s\">\"&lt;A class=bds_more href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"more\\\"&gt;\u5206\u4eab\u5230\uff1a&lt;/A&gt;\"</span>\n                + <span class=\"pl-s\">\"&lt;A title=\u5206\u4eab\u5230QQ\u7a7a\u95f4 class=bds_qzone href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"qzone\\\"&gt;\"</span>\n                + <span class=\"pl-s\">\"&lt;/A&gt;&lt;A title=\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a class=bds_tsina href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"tsina\\\"&gt;&lt;/A&gt;\"</span>\n                + <span class=\"pl-s\">\"&lt;A title=\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a class=bds_tqq href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"tqq\\\"&gt;&lt;/A&gt;\"</span>\n                + <span class=\"pl-s\">\"&lt;A title=\u5206\u4eab\u5230\u4eba\u4eba\u7f51 class=bds_renren href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"renren\\\"&gt;&lt;/A&gt;\"</span>\n                + <span class=\"pl-s\">\"&lt;A title=\u5206\u4eab\u5230\u5fae\u4fe1 class=bds_weixin href=\\\"http://share.baidu.com/code#\\\" data-cmd=\\\"weixin\\\"&gt;&lt;/A&gt;\"</span>\n                + <span class=\"pl-s\">\"&lt;/div&gt;\\r\\n\"</span>;\n        <span class=\"pl-smi\">Document</span> <span class=\"pl-s1\">doc</span> = <span class=\"pl-s1\">Jsoup</span>.<span class=\"pl-en\">parse</span>(<span class=\"pl-s1\">html</span>, <span class=\"pl-s\">\"\"</span>, <span class=\"pl-s1\">parser</span>);\n        <span class=\"pl-smi\">System</span>.<span class=\"pl-s1\">out</span>.<span class=\"pl-en\">println</span>(<span class=\"pl-s1\">doc</span>.<span class=\"pl-en\">html</span>());\n    }\n    \n\n}</pre></div>\n<p dir=\"auto\">the result is:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content='&lt;html&gt;\n &lt;head&gt;&lt;/head&gt;\n &lt;body&gt;\n  &lt;div class=\"bdsharebuttonbox\"&gt;\n   &lt;A class=\"bds_more\" href=\"http://share.baidu.com/code#\" data-cmd=\"more\"&gt;\n    \u5206\u4eab\u5230\uff1a\n   &lt;/A&gt;\n   &lt;A class=\"bds_more\" href=\"http://share.baidu.com/code#\" data-cmd=\"more\"&gt;\n    &lt;A title=\"\u5206\u4eab\u5230QQ\u7a7a\u95f4\" class=\"bds_qzone\" href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\"&gt;&lt;/A&gt;\n    &lt;A title=\"\u5206\u4eab\u5230QQ\u7a7a\u95f4\" class=\"bds_qzone\" href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\"&gt;\n     &lt;A title=\"\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a\" class=\"bds_tsina\" href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\"&gt;&lt;/A&gt;\n     &lt;A title=\"\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a\" class=\"bds_tsina\" href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\"&gt;\n      &lt;A title=\"\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a\" class=\"bds_tqq\" href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\"&gt;&lt;/A&gt;\n      &lt;A title=\"\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a\" class=\"bds_tqq\" href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\"&gt;\n       &lt;A title=\"\u5206\u4eab\u5230\u4eba\u4eba\u7f51\" class=\"bds_renren\" href=\"http://share.baidu.com/code#\" data-cmd=\"renren\"&gt;&lt;/A&gt;\n       &lt;A title=\"\u5206\u4eab\u5230\u4eba\u4eba\u7f51\" class=\"bds_renren\" href=\"http://share.baidu.com/code#\" data-cmd=\"renren\"&gt;\n        &lt;A title=\"\u5206\u4eab\u5230\u5fae\u4fe1\" class=\"bds_weixin\" href=\"http://share.baidu.com/code#\" data-cmd=\"weixin\"&gt;&lt;/A&gt;\n       &lt;/A&gt;\n      &lt;/A&gt;\n     &lt;/A&gt;\n    &lt;/A&gt;\n   &lt;/A&gt;\n  &lt;/div&gt;\n  &lt;A class=\"bds_more\" href=\"http://share.baidu.com/code#\" data-cmd=\"more\"&gt;\n   &lt;A title=\"\u5206\u4eab\u5230QQ\u7a7a\u95f4\" class=\"bds_qzone\" href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\"&gt;\n    &lt;A title=\"\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a\" class=\"bds_tsina\" href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\"&gt;\n     &lt;A title=\"\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a\" class=\"bds_tqq\" href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\"&gt;\n      &lt;A title=\"\u5206\u4eab\u5230\u4eba\u4eba\u7f51\" class=\"bds_renren\" href=\"http://share.baidu.com/code#\" data-cmd=\"renren\"&gt;\n       &lt;A title=\"\u5206\u4eab\u5230\u5fae\u4fe1\" class=\"bds_weixin\" href=\"http://share.baidu.com/code#\" data-cmd=\"weixin\"&gt; \n       &lt;/A&gt;\n      &lt;/A&gt;\n     &lt;/A&gt;\n    &lt;/A&gt;\n   &lt;/A&gt;\n  &lt;/A&gt;\n &lt;/body&gt;\n&lt;/html&gt;'><pre class=\"notranslate\"><code>&lt;html&gt;\n &lt;head&gt;&lt;/head&gt;\n &lt;body&gt;\n  &lt;div class=\"bdsharebuttonbox\"&gt;\n   &lt;A class=\"bds_more\" href=\"http://share.baidu.com/code#\" data-cmd=\"more\"&gt;\n    \u5206\u4eab\u5230\uff1a\n   &lt;/A&gt;\n   &lt;A class=\"bds_more\" href=\"http://share.baidu.com/code#\" data-cmd=\"more\"&gt;\n    &lt;A title=\"\u5206\u4eab\u5230QQ\u7a7a\u95f4\" class=\"bds_qzone\" href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\"&gt;&lt;/A&gt;\n    &lt;A title=\"\u5206\u4eab\u5230QQ\u7a7a\u95f4\" class=\"bds_qzone\" href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\"&gt;\n     &lt;A title=\"\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a\" class=\"bds_tsina\" href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\"&gt;&lt;/A&gt;\n     &lt;A title=\"\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a\" class=\"bds_tsina\" href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\"&gt;\n      &lt;A title=\"\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a\" class=\"bds_tqq\" href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\"&gt;&lt;/A&gt;\n      &lt;A title=\"\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a\" class=\"bds_tqq\" href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\"&gt;\n       &lt;A title=\"\u5206\u4eab\u5230\u4eba\u4eba\u7f51\" class=\"bds_renren\" href=\"http://share.baidu.com/code#\" data-cmd=\"renren\"&gt;&lt;/A&gt;\n       &lt;A title=\"\u5206\u4eab\u5230\u4eba\u4eba\u7f51\" class=\"bds_renren\" href=\"http://share.baidu.com/code#\" data-cmd=\"renren\"&gt;\n        &lt;A title=\"\u5206\u4eab\u5230\u5fae\u4fe1\" class=\"bds_weixin\" href=\"http://share.baidu.com/code#\" data-cmd=\"weixin\"&gt;&lt;/A&gt;\n       &lt;/A&gt;\n      &lt;/A&gt;\n     &lt;/A&gt;\n    &lt;/A&gt;\n   &lt;/A&gt;\n  &lt;/div&gt;\n  &lt;A class=\"bds_more\" href=\"http://share.baidu.com/code#\" data-cmd=\"more\"&gt;\n   &lt;A title=\"\u5206\u4eab\u5230QQ\u7a7a\u95f4\" class=\"bds_qzone\" href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\"&gt;\n    &lt;A title=\"\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a\" class=\"bds_tsina\" href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\"&gt;\n     &lt;A title=\"\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a\" class=\"bds_tqq\" href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\"&gt;\n      &lt;A title=\"\u5206\u4eab\u5230\u4eba\u4eba\u7f51\" class=\"bds_renren\" href=\"http://share.baidu.com/code#\" data-cmd=\"renren\"&gt;\n       &lt;A title=\"\u5206\u4eab\u5230\u5fae\u4fe1\" class=\"bds_weixin\" href=\"http://share.baidu.com/code#\" data-cmd=\"weixin\"&gt; \n       &lt;/A&gt;\n      &lt;/A&gt;\n     &lt;/A&gt;\n    &lt;/A&gt;\n   &lt;/A&gt;\n  &lt;/A&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre></div>\n<p dir=\"auto\">however, when not use preserveCase , result is right</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content='&lt;html&gt;\n &lt;head&gt;&lt;/head&gt;\n &lt;body&gt;\n  &lt;div class=\"bdsharebuttonbox\"&gt;\n   &lt;a class=\"bds_more\" href=\"http://share.baidu.com/code#\" data-cmd=\"more\"&gt;\u5206\u4eab\u5230\uff1a&lt;/a&gt;\n   &lt;a title=\"\u5206\u4eab\u5230QQ\u7a7a\u95f4\" class=\"bds_qzone\" href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\"&gt;&lt;/a&gt;\n   &lt;a title=\"\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a\" class=\"bds_tsina\" href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\"&gt;&lt;/a&gt;\n   &lt;a title=\"\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a\" class=\"bds_tqq\" href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\"&gt;&lt;/a&gt;\n   &lt;a title=\"\u5206\u4eab\u5230\u4eba\u4eba\u7f51\" class=\"bds_renren\" href=\"http://share.baidu.com/code#\" data-cmd=\"renren\"&gt;&lt;/a&gt;\n   &lt;a title=\"\u5206\u4eab\u5230\u5fae\u4fe1\" class=\"bds_weixin\" href=\"http://share.baidu.com/code#\" data-cmd=\"weixin\"&gt;&lt;/a&gt;\n  &lt;/div&gt; \n &lt;/body&gt;\n&lt;/html&gt;'><pre class=\"notranslate\"><code>&lt;html&gt;\n &lt;head&gt;&lt;/head&gt;\n &lt;body&gt;\n  &lt;div class=\"bdsharebuttonbox\"&gt;\n   &lt;a class=\"bds_more\" href=\"http://share.baidu.com/code#\" data-cmd=\"more\"&gt;\u5206\u4eab\u5230\uff1a&lt;/a&gt;\n   &lt;a title=\"\u5206\u4eab\u5230QQ\u7a7a\u95f4\" class=\"bds_qzone\" href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\"&gt;&lt;/a&gt;\n   &lt;a title=\"\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a\" class=\"bds_tsina\" href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\"&gt;&lt;/a&gt;\n   &lt;a title=\"\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a\" class=\"bds_tqq\" href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\"&gt;&lt;/a&gt;\n   &lt;a title=\"\u5206\u4eab\u5230\u4eba\u4eba\u7f51\" class=\"bds_renren\" href=\"http://share.baidu.com/code#\" data-cmd=\"renren\"&gt;&lt;/a&gt;\n   &lt;a title=\"\u5206\u4eab\u5230\u5fae\u4fe1\" class=\"bds_weixin\" href=\"http://share.baidu.com/code#\" data-cmd=\"weixin\"&gt;&lt;/a&gt;\n  &lt;/div&gt; \n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre></div>\n"}