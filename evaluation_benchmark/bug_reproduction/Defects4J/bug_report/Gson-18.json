{"issue_id": "1107", "title": "Gson deserializes wildcards to LinkedHashMap", "description": "\n<p dir=\"auto\">This issue is a successor to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-hovercard-type=\"issue\" data-hovercard-url=\"/google/gson/issues/1101/hovercard\" data-id=\"235145877\" data-permission-text=\"Title is private\" data-url=\"https://github.com/google/gson/issues/1101\" href=\"https://github.com/google/gson/issues/1101\">#1101</a>.</p>\n<p dir=\"auto\">Models:</p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"// ? extends causes the issue\nclass BigClass { Map&lt;String, ? extends List&lt;SmallClass&gt;&gt; inBig; }\n\nclass SmallClass { String inSmall; }\"><pre><span class=\"pl-c\">// ? extends causes the issue</span>\n<span class=\"pl-k\">class</span> <span class=\"pl-smi\">BigClass</span> { <span class=\"pl-smi\">Map</span>&lt;<span class=\"pl-smi\">String</span>, ? <span class=\"pl-k\">extends</span> <span class=\"pl-smi\">List</span>&lt;<span class=\"pl-smi\">SmallClass</span>&gt;&gt; <span class=\"pl-s1\">inBig</span>; }\n\n<span class=\"pl-k\">class</span> <span class=\"pl-smi\">SmallClass</span> { <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">inSmall</span>; }</pre></div>\n<p dir=\"auto\">Json:</p>\n<div class=\"highlight highlight-source-json notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content='{\n  \"inBig\": {\n    \"key\": [\n      { \"inSmall\": \"hello\" }\n    ]\n  }\n}'><pre>{\n  <span class=\"pl-ent\">\"inBig\"</span>: {\n    <span class=\"pl-ent\">\"key\"</span>: [\n      { <span class=\"pl-ent\">\"inSmall\"</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>hello<span class=\"pl-pds\">\"</span> </span>}\n    ]\n  }\n}</pre></div>\n<p dir=\"auto\">Gson call:</p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content='SmallClass small = new Gson().fromJson(json, BigClass.class).inBig.get(\"inSmall\").get(0);'><pre><span class=\"pl-smi\">SmallClass</span> <span class=\"pl-s1\">small</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">Gson</span>().<span class=\"pl-en\">fromJson</span>(<span class=\"pl-s1\">json</span>, <span class=\"pl-smi\">BigClass</span>.<span class=\"pl-s1\">class</span>).<span class=\"pl-s1\">inBig</span>.<span class=\"pl-en\">get</span>(<span class=\"pl-s\">\"inSmall\"</span>).<span class=\"pl-en\">get</span>(<span class=\"pl-c1\">0</span>);</pre></div>\n<p dir=\"auto\">This call will fail with a <code class=\"notranslate\">ClassCastException</code> exception \u2013<br/>\n<code class=\"notranslate\">com.google.gson.internal.LinkedTreeMap cannot be cast to Entry</code>. If we remove <code class=\"notranslate\">? extends</code> then everything works fine.</p>\n"}