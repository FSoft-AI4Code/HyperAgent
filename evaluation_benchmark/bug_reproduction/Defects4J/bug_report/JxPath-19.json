{"issue_id": "JXPATH-125", "title": "JXPathContext.iteratePointers() does not work with multiple prefixes for a single namespace URI", "description": "\n<div class=\"user-content-block\">\n<p>Have a look at the following document:</p>\n<p>&lt;a:doc xmlns:a=\"ns\"&gt;<br/>\n  &lt;a:elem /&gt;<br/>\n  &lt;b:elem xmlns:b=\"ns\" /&gt;<br/>\n&lt;/a:doc&gt;</p>\n<p>We have two elements 'elem' in the same namespace 'ns'.<br/>\nThey have a different prefix, however.</p>\n<p>When we use JXPathContext.iteratePointers() to iterate over them, the first element is returned two times. The second element is not returned.</p>\n<p>This is because<br/>\nin class org.apache.commons.jxpath.ri.model.dom.DOMNodePointer<br/>\nin method getRelativePositionByName() (line 546)<br/>\nwe have:</p>\n<p>if (nm.equals(node.getNodeName()))</p>\n<p>In the example, we have<br/>\nnm  == \"a:elem\" and node == \"b:elem\"</p>\n<p>Thus, equals() returns false. But since 'a' and 'b' are just different prefixes for the same namespace URI, we should have 'true'.</p>\n<p>I attached a testcase which reproduces the bug.</p>\n</div>\n"}