{"issue_id": "CODEC-229", "title": "StringUtils.newStringxxx(null) should return null, not NPE", "description": "\n<div class=\"user-content-block\">\n<p>Method calls such as StringUtils.newStringIso8859_1(null) should return null, not NPE.</p>\n<p>It looks like this capability was lost with the fix for <a class=\"issue-link\" data-issue-key=\"CODEC-136\" href=\"https://issues.apache.org/jira/browse/CODEC-136\" title=\"Use Charset objects when possible, create Charsets class for required character encodings\"><del>CODEC-136</del></a>, i.e.<br/>\n<a class=\"external-link\" href=\"http://svn.apache.org/viewvc?rev=1306366&amp;view=rev\" rel=\"nofollow noopener\" target=\"_blank\">http://svn.apache.org/viewvc?rev=1306366&amp;view=rev</a></p>\n<p>Several methods were changed from</p>\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\"><span class=\"code-keyword\">return</span> StringUtils.newString(bytes, CharEncoding.xxx);\nto\n<span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> <span class=\"code-object\">String</span>(bytes, Charsets.xxx);\n</pre>\n</div></div>\n<p>The new code should have been:</p>\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\"><span class=\"code-keyword\">return</span> newString(bytes, Charsets.xxx);\n</pre>\n</div></div>\n<p>The newString method handles null input.</p>\n<p>There were no tests for null input so the change in behaviour was missed.</p>\n</div>\n"}