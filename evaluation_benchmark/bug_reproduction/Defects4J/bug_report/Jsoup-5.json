{"issue_id": "32", "title": "StringIndexOutOfBoundsException when testing whether String content is valid HTML ", "description": "\n<p dir=\"auto\">If I try to parse a tag with an equals sign (an empty attribute) but without any single or double quotes around an attribute value, then I get a StringIndexOutOfBoundsException.  The stack trace is pasted below.</p>\n<p dir=\"auto\">An example String would be \"&lt;a =a\"</p>\n<p dir=\"auto\">The following JUnit test case should not throw a StringIndexOutOfBoundsException:</p>\n<p dir=\"auto\">import static org.junit.Assert.assertTrue;<br/>\nimport org.jsoup.Jsoup;<br/>\nimport org.jsoup.safety.Whitelist;<br/>\nimport org.junit.Test;<br/>\npublic class BadAttributeTest {<br/>\n<a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/test/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/test\">@test</a><br/>\npublic void aTagWithABadAttributeIsValid() throws Exception {<br/>\nassertTrue(Jsoup.isValid(\"&lt;a =a\", Whitelist.relaxed()));<br/>\n}<br/>\n}</p>\n<p dir=\"auto\">java.lang.StringIndexOutOfBoundsException: String index out of range: 13<br/>\nat java.lang.String.charAt(String.java:686)<br/>\nat org.jsoup.parser.TokenQueue.consume(TokenQueue.java:130)<br/>\nat org.jsoup.parser.Parser.parseAttribute(Parser.java:207)<br/>\nat org.jsoup.parser.Parser.parseStartTag(Parser.java:142)<br/>\nat org.jsoup.parser.Parser.parse(Parser.java:91)<br/>\nat org.jsoup.parser.Parser.parseBodyFragment(Parser.java:64)<br/>\nat org.jsoup.Jsoup.parseBodyFragment(Jsoup.java:99)<br/>\nat org.jsoup.Jsoup.isValid(Jsoup.java:155)</p>\n"}