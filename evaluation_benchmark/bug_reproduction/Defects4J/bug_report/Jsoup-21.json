{"issue_id": "179", "title": "Selector parsing gets confused by commata in regexes", "description": "\n<p dir=\"auto\">The selector <code class=\"notranslate\">div, li:matches([0-9,]+)</code> causes a java.util.regex.PatternSyntaxException because  <a href=\"https://github.com/jhy/jsoup/blob/master/src/main/java/org/jsoup/select/QueryParser.java#L63\">QueryParser (line 63)</a> thinks that the comma inside the regex is a combinator and thus extracts <code class=\"notranslate\">, li:matches([0-9</code> as the second alternative.</p>\n<p dir=\"auto\">Instead of scanning ahead with `chompTo(\",\"), the parser needs to parse its way through the alternative until it reaches a comma or the end of a string. That way, commata in regular expressions will be correctly interpreted as part of the regex.</p>\n<p dir=\"auto\">Note that there may be many more variations of this bug in the parser. Wherever a construct allows embedding an arbitrary string one should expect this problem. <code class=\"notranslate\">[attr=a,b]</code> for example is likely to cause the same issue. In a way, any invocation of chompTo() needs to examined.</p>\n"}