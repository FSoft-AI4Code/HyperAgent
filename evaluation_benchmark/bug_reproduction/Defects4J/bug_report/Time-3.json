{"issue_id": "77", "title": "addDays(0) changes value of MutableDateTime", "description": "\n<p dir=\"auto\">Upon DST transition from summer to winter time zone, adding the amount of zero days to a mutable date time object changes the value of the object.</p>\n<p dir=\"auto\">The code</p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content='final MutableDateTime mdt = new MutableDateTime(2011, 10, 30, 3, 0, 0, 0, DateTimeZone.forID(\"Europe/Berlin\"));\nSystem.out.println(\"Start date:   \" + mdt + \" (\" + mdt.toInstant().getMillis() + \")\");\nmdt.addHours(-1);\nSystem.out.println(\"addHours(-1): \" + mdt + \" (\" + mdt.toInstant().getMillis() + \")\");\nmdt.addHours(0);\nSystem.out.println(\"addHours(0):  \" + mdt + \" (\" + mdt.toInstant().getMillis() + \")\");\nmdt.addDays(0);\nSystem.out.println(\"addDays(0):   \" + mdt + \" (\" + mdt.toInstant().getMillis() + \")\");'><pre><span class=\"pl-k\">final</span> <span class=\"pl-smi\">MutableDateTime</span> <span class=\"pl-s1\">mdt</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">MutableDateTime</span>(<span class=\"pl-c1\">2011</span>, <span class=\"pl-c1\">10</span>, <span class=\"pl-c1\">30</span>, <span class=\"pl-c1\">3</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-s1\">DateTimeZone</span>.<span class=\"pl-en\">forID</span>(<span class=\"pl-s\">\"Europe/Berlin\"</span>));\n<span class=\"pl-smi\">System</span>.<span class=\"pl-s1\">out</span>.<span class=\"pl-en\">println</span>(<span class=\"pl-s\">\"Start date:   \"</span> + <span class=\"pl-s1\">mdt</span> + <span class=\"pl-s\">\" (\"</span> + <span class=\"pl-s1\">mdt</span>.<span class=\"pl-en\">toInstant</span>().<span class=\"pl-en\">getMillis</span>() + <span class=\"pl-s\">\")\"</span>);\n<span class=\"pl-s1\">mdt</span>.<span class=\"pl-en\">addHours</span>(-<span class=\"pl-c1\">1</span>);\n<span class=\"pl-smi\">System</span>.<span class=\"pl-s1\">out</span>.<span class=\"pl-en\">println</span>(<span class=\"pl-s\">\"addHours(-1): \"</span> + <span class=\"pl-s1\">mdt</span> + <span class=\"pl-s\">\" (\"</span> + <span class=\"pl-s1\">mdt</span>.<span class=\"pl-en\">toInstant</span>().<span class=\"pl-en\">getMillis</span>() + <span class=\"pl-s\">\")\"</span>);\n<span class=\"pl-s1\">mdt</span>.<span class=\"pl-en\">addHours</span>(<span class=\"pl-c1\">0</span>);\n<span class=\"pl-smi\">System</span>.<span class=\"pl-s1\">out</span>.<span class=\"pl-en\">println</span>(<span class=\"pl-s\">\"addHours(0):  \"</span> + <span class=\"pl-s1\">mdt</span> + <span class=\"pl-s\">\" (\"</span> + <span class=\"pl-s1\">mdt</span>.<span class=\"pl-en\">toInstant</span>().<span class=\"pl-en\">getMillis</span>() + <span class=\"pl-s\">\")\"</span>);\n<span class=\"pl-s1\">mdt</span>.<span class=\"pl-en\">addDays</span>(<span class=\"pl-c1\">0</span>);\n<span class=\"pl-smi\">System</span>.<span class=\"pl-s1\">out</span>.<span class=\"pl-en\">println</span>(<span class=\"pl-s\">\"addDays(0):   \"</span> + <span class=\"pl-s1\">mdt</span> + <span class=\"pl-s\">\" (\"</span> + <span class=\"pl-s1\">mdt</span>.<span class=\"pl-en\">toInstant</span>().<span class=\"pl-en\">getMillis</span>() + <span class=\"pl-s\">\")\"</span>);</pre></div>\n<p dir=\"auto\">prints</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Start date:   2011-10-30T03:00:00.000+01:00 (1319940000000)    //OK\naddHours(-1): 2011-10-30T02:00:00.000+01:00 (1319936400000)    //OK\naddHours(0):  2011-10-30T02:00:00.000+01:00 (1319936400000)    //OK, no change in time\naddDays(0):   2011-10-30T02:00:00.000+02:00 (1319932800000)    //error, time has changed by 1 hour\"><pre class=\"notranslate\"><code>Start date:   2011-10-30T03:00:00.000+01:00 (1319940000000)    //OK\naddHours(-1): 2011-10-30T02:00:00.000+01:00 (1319936400000)    //OK\naddHours(0):  2011-10-30T02:00:00.000+01:00 (1319936400000)    //OK, no change in time\naddDays(0):   2011-10-30T02:00:00.000+02:00 (1319932800000)    //error, time has changed by 1 hour\n</code></pre></div>\n<p dir=\"auto\">The methods addMonths and addYears show the same problem; addSeconds, addMinutes and addHours are ok.</p>\n<p dir=\"auto\">I have tested with version 2.3. However, if I repeat the test with Joda 1.5.2, the invocation of addDays(0) does not change the date's value.</p>\n"}