{"issue_id": "1421", "title": "ACCEPT_SINGLE_VALUE_AS_ARRAY partially broken in 2.7.x, 2.8.x", "description": "\n<p dir=\"auto\">In 2.7.x, 2.8.x versions following test fails with an exception:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content='public class Test {\n    private static final String JSON = \"[{\\\"message\\\":\\\"messageHere\\\"}]\";\n\n    static class A {\n        List&lt;B&gt; bs = Collections.emptyList();\n\n        @JsonCreator\n        A(final List&lt;B&gt; bs) {\n            this.bs = bs;\n        }\n    }\n\n    static class B {\n        List&lt;C&gt; cs = Collections.emptyList();\n\n        @JsonCreator\n        B(final List&lt;C&gt; cs) {\n            this.cs = cs;\n        }\n    }\n\n    public static class C {\n        String message;\n\n        @JsonCreator\n        C(@JsonProperty(\"message\") String message) {\n            this.message = message;\n        }\n    }\n\n    @Test\n    public void test() throws IOException {\n        ObjectMapper om = new ObjectMapper();\n        om.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);\n        om.readValue(JSON, A.class);\n    }\n}\n\n\ncom.fasterxml.jackson.databind.exc.InputMismatchException: Can not construct instance of com.fasterxml.jackson.databind.creators.JsonCreatorWithCollectionTest$B, problem: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?)\n at [Source: [{\"message\":\"site is missing from bid request (breq) object\"}]; line: 1, column: 3] (through reference chain: java.util.ArrayList[0])\n\n    at com.fasterxml.jackson.databind.exc.InputMismatchException.from(InputMismatchException.java:58)\n    at com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1354)\n    at com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1019)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1207)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:314)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:148)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:289)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:261)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:26)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromArray(BeanDeserializerBase.java:1336)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:174)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:150)\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3806)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2849)\n    at com.fasterxml.jackson.databind.creators.JsonCreatorWithCollectionTest.test(JsonCreatorWithCollectionTest.java:51)'><pre class=\"notranslate\"><code>public class Test {\n    private static final String JSON = \"[{\\\"message\\\":\\\"messageHere\\\"}]\";\n\n    static class A {\n        List&lt;B&gt; bs = Collections.emptyList();\n\n        @JsonCreator\n        A(final List&lt;B&gt; bs) {\n            this.bs = bs;\n        }\n    }\n\n    static class B {\n        List&lt;C&gt; cs = Collections.emptyList();\n\n        @JsonCreator\n        B(final List&lt;C&gt; cs) {\n            this.cs = cs;\n        }\n    }\n\n    public static class C {\n        String message;\n\n        @JsonCreator\n        C(@JsonProperty(\"message\") String message) {\n            this.message = message;\n        }\n    }\n\n    @Test\n    public void test() throws IOException {\n        ObjectMapper om = new ObjectMapper();\n        om.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);\n        om.readValue(JSON, A.class);\n    }\n}\n\n\ncom.fasterxml.jackson.databind.exc.InputMismatchException: Can not construct instance of com.fasterxml.jackson.databind.creators.JsonCreatorWithCollectionTest$B, problem: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?)\n at [Source: [{\"message\":\"site is missing from bid request (breq) object\"}]; line: 1, column: 3] (through reference chain: java.util.ArrayList[0])\n\n    at com.fasterxml.jackson.databind.exc.InputMismatchException.from(InputMismatchException.java:58)\n    at com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1354)\n    at com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1019)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1207)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:314)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:148)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:289)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:261)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:26)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromArray(BeanDeserializerBase.java:1336)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:174)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:150)\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3806)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2849)\n    at com.fasterxml.jackson.databind.creators.JsonCreatorWithCollectionTest.test(JsonCreatorWithCollectionTest.java:51)\n</code></pre></div>\n<p dir=\"auto\">While on 2.5 and 2.6 it works fine.</p>\n"}