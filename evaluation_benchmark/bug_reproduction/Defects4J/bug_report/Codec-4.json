{"issue_id": "CODEC-89", "title": "new Base64().encode() appends a CRLF, and chunks results into 76 character lines", "description": "\n<div class=\"user-content-block\">\n<p>The instance encode() method (e.g. new Base64().encode()) appends a CRLF.  Actually it's fully chunking the output into 76 character lines.  Commons-Codec-1.3 did not do this.  The static Base64.encodeBase64() method behaves the same in both 1.3 and 1.4, so this problem only affects the instance encode() method.</p>\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\"><span class=\"code-keyword\">import</span> org.apache.commons.codec.binary.*;\n\n<span class=\"code-keyword\">public</span> <span class=\"code-keyword\">class </span>B64 {\n\n  <span class=\"code-keyword\">public</span> <span class=\"code-keyword\">static</span> void main(<span class=\"code-object\">String</span>[] args) <span class=\"code-keyword\">throws</span> Exception {\n    Base64 b64 = <span class=\"code-keyword\">new</span> Base64();\n\n    <span class=\"code-object\">String</span> s1 = <span class=\"code-quote\">\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"</span>;\n    <span class=\"code-object\">String</span> s2 = <span class=\"code-quote\">\"aaaaaaaaaa\"</span>;\n    <span class=\"code-object\">String</span> s3 = <span class=\"code-quote\">\"a\"</span>;\n    \n    <span class=\"code-object\">byte</span>[] b1 = s1.getBytes(<span class=\"code-quote\">\"UTF-8\"</span>);\n    <span class=\"code-object\">byte</span>[] b2 = s2.getBytes(<span class=\"code-quote\">\"UTF-8\"</span>);\n    <span class=\"code-object\">byte</span>[] b3 = s3.getBytes(<span class=\"code-quote\">\"UTF-8\"</span>);\n\n    <span class=\"code-object\">byte</span>[] result;\n    result = Base64.encodeBase64(b1);\n    <span class=\"code-object\">System</span>.out.println(<span class=\"code-quote\">\"[\"</span> + <span class=\"code-keyword\">new</span> <span class=\"code-object\">String</span>(result, <span class=\"code-quote\">\"UTF-8\"</span>) + <span class=\"code-quote\">\"]\"</span>);\n    result = b64.encode(b1);\n    <span class=\"code-object\">System</span>.out.println(<span class=\"code-quote\">\"[\"</span> + <span class=\"code-keyword\">new</span> <span class=\"code-object\">String</span>(result, <span class=\"code-quote\">\"UTF-8\"</span>) + <span class=\"code-quote\">\"]\"</span>);\n\n    result = Base64.encodeBase64(b2);\n    <span class=\"code-object\">System</span>.out.println(<span class=\"code-quote\">\"[\"</span> + <span class=\"code-keyword\">new</span> <span class=\"code-object\">String</span>(result, <span class=\"code-quote\">\"UTF-8\"</span>) + <span class=\"code-quote\">\"]\"</span>);\n    result = b64.encode(b2);\n    <span class=\"code-object\">System</span>.out.println(<span class=\"code-quote\">\"[\"</span> + <span class=\"code-keyword\">new</span> <span class=\"code-object\">String</span>(result, <span class=\"code-quote\">\"UTF-8\"</span>) + <span class=\"code-quote\">\"]\"</span>);\n\n    result = Base64.encodeBase64(b3);\n    <span class=\"code-object\">System</span>.out.println(<span class=\"code-quote\">\"[\"</span> + <span class=\"code-keyword\">new</span> <span class=\"code-object\">String</span>(result, <span class=\"code-quote\">\"UTF-8\"</span>) + <span class=\"code-quote\">\"]\"</span>);\n    result = b64.encode(b3);\n    <span class=\"code-object\">System</span>.out.println(<span class=\"code-quote\">\"[\"</span> + <span class=\"code-keyword\">new</span> <span class=\"code-object\">String</span>(result, <span class=\"code-quote\">\"UTF-8\"</span>) + <span class=\"code-quote\">\"]\"</span>);\n\n  }\n}\n</pre>\n</div></div>\n<p>Here's my output:</p>\n<div class=\"preformatted panel\" style=\"border-width: 1px;\"><div class=\"preformattedContent panelContent\">\n<pre>$ java -cp commons-codec-1.3.jar:. B64\n[YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ==]\n[YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ==]\n[YWFhYWFhYWFhYQ==]\n[YWFhYWFhYWFhYQ==]\n[YQ==]\n[YQ==]\n\n\n$ java -cp commons-codec-1.4.jar:. B64\n[YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ==]\n[YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFh\nYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ==\n]\n[YWFhYWFhYWFhYQ==]\n[YWFhYWFhYWFhYQ==\n]\n[YQ==]\n[YQ==\n]\n</pre>\n</div></div>\n</div>\n"}