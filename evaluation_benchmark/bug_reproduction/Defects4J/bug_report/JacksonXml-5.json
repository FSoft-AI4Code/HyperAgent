{"issue_id": "282", "title": "<code>@JacksonXmlRootElement</code> malfunction when using it with multiple <code>XmlMapper</code>s and disabling annotations", "description": "\n<p dir=\"auto\">Found this in version 2.9.4 running some tests that go back and forth serializing with an XML mapper that uses annotations, and another one that ignores them. May be related to issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-hovercard-type=\"issue\" data-hovercard-url=\"/FasterXML/jackson-dataformat-xml/issues/171/hovercard\" data-id=\"118007506\" data-permission-text=\"Title is private\" data-url=\"https://github.com/FasterXML/jackson-dataformat-xml/issues/171\" href=\"https://github.com/FasterXML/jackson-dataformat-xml/issues/171\">#171</a> and the cache of class annotations.</p>\n<p dir=\"auto\">When running this code, the second print statement should use the annotation's localName but it instead uses the class name.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content='@JacksonXmlRootElement(localName = \"myname\")\npublic class XMLTest {\n\n    public static void main(String[] s) throws Exception {\n\n        final ObjectMapper xmlMapper = new XmlMapper();\n        final ObjectMapper noAnnotationsXmlMapper = xmlMapper.copy()\n                .configure(MapperFeature.USE_ANNOTATIONS, false)\n                .configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\n\n        System.out.println(noAnnotationsXmlMapper.writeValueAsString(new XMLTest()));\n        System.out.println(xmlMapper.writeValueAsString(new XMLTest()));\n\n    }\n\n}'><pre class=\"notranslate\"><code>@JacksonXmlRootElement(localName = \"myname\")\npublic class XMLTest {\n\n    public static void main(String[] s) throws Exception {\n\n        final ObjectMapper xmlMapper = new XmlMapper();\n        final ObjectMapper noAnnotationsXmlMapper = xmlMapper.copy()\n                .configure(MapperFeature.USE_ANNOTATIONS, false)\n                .configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\n\n        System.out.println(noAnnotationsXmlMapper.writeValueAsString(new XMLTest()));\n        System.out.println(xmlMapper.writeValueAsString(new XMLTest()));\n\n    }\n\n}\n</code></pre></div>\n<p dir=\"auto\">Output:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"&lt;XMLTest/&gt;\n&lt;XMLTest/&gt;\"><pre class=\"notranslate\"><code>&lt;XMLTest/&gt;\n&lt;XMLTest/&gt;\n</code></pre></div>\n"}