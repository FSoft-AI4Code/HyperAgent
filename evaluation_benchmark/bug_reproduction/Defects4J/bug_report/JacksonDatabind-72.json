{"issue_id": "1501", "title": "ArrayIndexOutOfBoundsException on impossible non-static inner class constructor", "description": "\n<p dir=\"auto\">Minimal repro:</p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content='public class Something {\n    public InnerSomething a;\n\n    @JsonCreator\n    public Something(@JsonProperty(\"a\") InnerSomething a) {}\n\n    class InnerSomething {\n        @JsonCreator\n        public InnerSomething() {}\n    }\n\n}'><pre><span class=\"pl-k\">public</span> <span class=\"pl-k\">class</span> <span class=\"pl-smi\">Something</span> {\n    <span class=\"pl-k\">public</span> <span class=\"pl-smi\">InnerSomething</span> <span class=\"pl-s1\">a</span>;\n\n    <span class=\"pl-c1\">@</span><span class=\"pl-c1\">JsonCreator</span>\n    <span class=\"pl-k\">public</span> <span class=\"pl-smi\">Something</span>(<span class=\"pl-c1\">@</span><span class=\"pl-c1\">JsonProperty</span>(<span class=\"pl-s\">\"a\"</span>) <span class=\"pl-smi\">InnerSomething</span> <span class=\"pl-s1\">a</span>) {}\n\n    <span class=\"pl-k\">class</span> <span class=\"pl-smi\">InnerSomething</span> {\n        <span class=\"pl-c1\">@</span><span class=\"pl-c1\">JsonCreator</span>\n        <span class=\"pl-k\">public</span> <span class=\"pl-smi\">InnerSomething</span>() {}\n    }\n\n}</pre></div>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"        ObjectMapper mapper = new ObjectMapper();\n        String ser = mapper.writeValueAsString(new Something(null));\n        mapper.readValue(ser, Something.class);\"><pre>        <span class=\"pl-smi\">ObjectMapper</span> <span class=\"pl-s1\">mapper</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">ObjectMapper</span>();\n        <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">ser</span> = <span class=\"pl-s1\">mapper</span>.<span class=\"pl-en\">writeValueAsString</span>(<span class=\"pl-k\">new</span> <span class=\"pl-smi\">Something</span>(<span class=\"pl-c1\">null</span>));\n        <span class=\"pl-s1\">mapper</span>.<span class=\"pl-en\">readValue</span>(<span class=\"pl-s1\">ser</span>, <span class=\"pl-smi\">Something</span>.<span class=\"pl-s1\">class</span>);</pre></div>\n<p dir=\"auto\">Fails like this:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"java.lang.ArrayIndexOutOfBoundsException: -1\n\n\tat com.fasterxml.jackson.databind.deser.impl.PropertyValueBuffer.assignParameter(PropertyValueBuffer.java:210)\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:380)\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1123)\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:298)\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:133)\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3807)\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2797)\"><pre class=\"notranslate\"><code>java.lang.ArrayIndexOutOfBoundsException: -1\n\n\tat com.fasterxml.jackson.databind.deser.impl.PropertyValueBuffer.assignParameter(PropertyValueBuffer.java:210)\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:380)\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1123)\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:298)\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:133)\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3807)\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2797)\n</code></pre></div>\n<p dir=\"auto\">Validation is missing for this impossible constructor. Works as expected when <code class=\"notranslate\">InnerSomething</code> is static.</p>\n"}