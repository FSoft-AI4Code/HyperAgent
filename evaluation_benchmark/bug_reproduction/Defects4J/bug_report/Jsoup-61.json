{"issue_id": "814", "title": "Unexpected case sensitivity for CSS class selector", "description": "\n<p dir=\"auto\">Hi,<br/>\ni use JSoup version 1.10.2 and noticed an unexpected case sensitivity for a CSS class selector. I tried to parse the following HTML document with capitalized class attributes:</p>\n<div class=\"highlight highlight-text-html-basic notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"&lt;!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'&gt;\n&lt;HTML&gt;\n  &lt;HEAD&gt;\n    &lt;FORM Method='POST' name='Form' Action='Action'&gt;\n      &lt;TABLE Class='Lst'&gt;\n        &lt;TR Class='Lst'&gt;\n          &lt;TH Class='Lst'&gt;Header 1&lt;/TH&gt;\n          &lt;TH Class='Lst'&gt;Header 2&lt;/TH&gt;\n          &lt;TH Class='Lst'&gt;Header 3&lt;/TH&gt;\n        &lt;/TR&gt;\n        &lt;TR Class='Lst1'&gt;\n          &lt;TD Class='Lst'&gt;Cell 1&lt;/TD&gt;\n          &lt;TD Class='Lst'&gt;Cell 2&lt;/TD&gt;\n          &lt;TD Class='Lst'&gt;Cell 3&lt;/TD&gt;\n        &lt;/TR&gt;\n      &lt;/TABLE&gt;\n    &lt;/FORM&gt;\n  &lt;/BODY&gt;\n&lt;/HTML&gt;\"><pre><span class=\"pl-c1\">&lt;!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'<span class=\"pl-kos\">&gt;</span></span>\n<span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">HTML</span><span class=\"pl-kos\">&gt;</span>\n  <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">HEAD</span><span class=\"pl-kos\">&gt;</span>\n    <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">FORM</span> <span class=\"pl-c1\">Method</span>='<span class=\"pl-s\">POST</span>' <span class=\"pl-c1\">name</span>='<span class=\"pl-s\">Form</span>' <span class=\"pl-c1\">Action</span>='<span class=\"pl-s\">Action</span>'<span class=\"pl-kos\">&gt;</span>\n      <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">TABLE</span> <span class=\"pl-c1\">Class</span>='<span class=\"pl-s\">Lst</span>'<span class=\"pl-kos\">&gt;</span>\n        <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">TR</span> <span class=\"pl-c1\">Class</span>='<span class=\"pl-s\">Lst</span>'<span class=\"pl-kos\">&gt;</span>\n          <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">TH</span> <span class=\"pl-c1\">Class</span>='<span class=\"pl-s\">Lst</span>'<span class=\"pl-kos\">&gt;</span>Header 1<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">TH</span><span class=\"pl-kos\">&gt;</span>\n          <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">TH</span> <span class=\"pl-c1\">Class</span>='<span class=\"pl-s\">Lst</span>'<span class=\"pl-kos\">&gt;</span>Header 2<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">TH</span><span class=\"pl-kos\">&gt;</span>\n          <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">TH</span> <span class=\"pl-c1\">Class</span>='<span class=\"pl-s\">Lst</span>'<span class=\"pl-kos\">&gt;</span>Header 3<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">TH</span><span class=\"pl-kos\">&gt;</span>\n        <span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">TR</span><span class=\"pl-kos\">&gt;</span>\n        <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">TR</span> <span class=\"pl-c1\">Class</span>='<span class=\"pl-s\">Lst1</span>'<span class=\"pl-kos\">&gt;</span>\n          <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">TD</span> <span class=\"pl-c1\">Class</span>='<span class=\"pl-s\">Lst</span>'<span class=\"pl-kos\">&gt;</span>Cell 1<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">TD</span><span class=\"pl-kos\">&gt;</span>\n          <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">TD</span> <span class=\"pl-c1\">Class</span>='<span class=\"pl-s\">Lst</span>'<span class=\"pl-kos\">&gt;</span>Cell 2<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">TD</span><span class=\"pl-kos\">&gt;</span>\n          <span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">TD</span> <span class=\"pl-c1\">Class</span>='<span class=\"pl-s\">Lst</span>'<span class=\"pl-kos\">&gt;</span>Cell 3<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">TD</span><span class=\"pl-kos\">&gt;</span>\n        <span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">TR</span><span class=\"pl-kos\">&gt;</span>\n      <span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">TABLE</span><span class=\"pl-kos\">&gt;</span>\n    <span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">FORM</span><span class=\"pl-kos\">&gt;</span>\n  <span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">BODY</span><span class=\"pl-kos\">&gt;</span>\n<span class=\"pl-kos\">&lt;/</span><span class=\"pl-ent\">HTML</span><span class=\"pl-kos\">&gt;</span></pre></div>\n<p dir=\"auto\">I wanted to select the table using the selector <em>\"html &gt; body &gt; form table.Lst\"</em> because I expected it to choose the table with the class attribute \"Lst\", but that did not work. The selector <em>\"html &gt; body &gt; form table[class=Lst]\"</em> works. Is this a bug?</p>\n<p dir=\"auto\">Here is the parser code:</p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"try {\n  final String htmlStr = &quot;&lt;!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'&gt;\\n&quot;\n      + &quot;&lt;HTML&gt;\\n&quot;\n      + &quot;  &lt;HEAD&gt;\\n&quot;\n      + &quot;    &lt;FORM Method='POST' name='Form' Action='Action'&gt;\\n&quot;\n      + &quot;      &lt;TABLE Class='Lst'&gt;\\n&quot;\n      + &quot;        &lt;TR Class='Lst'&gt;\\n&quot;\n      + &quot;          &lt;TH Class='Lst'&gt;Header 1&lt;/TH&gt;\\n&quot;\n      + &quot;          &lt;TH Class='Lst'&gt;Header 2&lt;/TH&gt;\\n&quot;\n      + &quot;          &lt;TH Class='Lst'&gt;Header 3&lt;/TH&gt;\\n&quot;\n      + &quot;        &lt;/TR&gt;\\n&quot;\n      + &quot;        &lt;TR Class='Lst1'&gt;\\n&quot;\n      + &quot;          &lt;TD Class='Lst'&gt;Cell 1&lt;/TD&gt;\\n&quot;\n      + &quot;          &lt;TD Class='Lst'&gt;Cell 2&lt;/TD&gt;\\n&quot;\n      + &quot;          &lt;TD Class='Lst'&gt;Cell 3&lt;/TD&gt;\\n&quot;\n      + &quot;        &lt;/TR&gt;\\n&quot;\n      + &quot;      &lt;/TABLE&gt;\\n&quot;\n      + &quot;    &lt;/FORM&gt;\\n&quot;\n      + &quot;  &lt;/BODY&gt;\\n&quot;\n      + &quot;&lt;/HTML&gt;&quot;;\n  final Document htmlDoc = Jsoup.parse(htmlStr,\n      &quot;&quot;);\n\n  final Element tableNotOk = htmlDoc.select(&quot;html &gt; body &gt; form table.Lst&quot;)\n      .first();\n  final Element tableOk = htmlDoc.select(&quot;html &gt; body &gt; form table[class=Lst]&quot;)\n      .first();\n\n  Logger.getLogger(this.getClass().getName())\n      .log(Level.INFO,\n          &quot;tableNotOk found: ''{0}'', tableOk found: ''{1}''&quot;,\n          new Object[]{(tableNotOk != null), (tableOk != null)});\n\n} catch (UnsupportedCharsetException | ParseException | Selector.SelectorParseException ex) {\n  Logger.getLogger(this.getClass().getName())\n      .log(Level.SEVERE,\n          null,\n          ex);\n}\"><pre><span class=\"pl-k\">try</span> {\n  <span class=\"pl-k\">final</span> <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">htmlStr</span> = <span class=\"pl-s\">\"&lt;!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"&lt;HTML&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"  &lt;HEAD&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"    &lt;FORM Method='POST' name='Form' Action='Action'&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"      &lt;TABLE Class='Lst'&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"        &lt;TR Class='Lst'&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"          &lt;TH Class='Lst'&gt;Header 1&lt;/TH&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"          &lt;TH Class='Lst'&gt;Header 2&lt;/TH&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"          &lt;TH Class='Lst'&gt;Header 3&lt;/TH&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"        &lt;/TR&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"        &lt;TR Class='Lst1'&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"          &lt;TD Class='Lst'&gt;Cell 1&lt;/TD&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"          &lt;TD Class='Lst'&gt;Cell 2&lt;/TD&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"          &lt;TD Class='Lst'&gt;Cell 3&lt;/TD&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"        &lt;/TR&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"      &lt;/TABLE&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"    &lt;/FORM&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"  &lt;/BODY&gt;\\n\"</span>\n      + <span class=\"pl-s\">\"&lt;/HTML&gt;\"</span>;\n  <span class=\"pl-k\">final</span> <span class=\"pl-smi\">Document</span> <span class=\"pl-s1\">htmlDoc</span> = <span class=\"pl-s1\">Jsoup</span>.<span class=\"pl-en\">parse</span>(<span class=\"pl-s1\">htmlStr</span>,\n      <span class=\"pl-s\">\"\"</span>);\n\n  <span class=\"pl-k\">final</span> <span class=\"pl-smi\">Element</span> <span class=\"pl-s1\">tableNotOk</span> = <span class=\"pl-s1\">htmlDoc</span>.<span class=\"pl-en\">select</span>(<span class=\"pl-s\">\"html &gt; body &gt; form table.Lst\"</span>)\n      .<span class=\"pl-en\">first</span>();\n  <span class=\"pl-k\">final</span> <span class=\"pl-smi\">Element</span> <span class=\"pl-s1\">tableOk</span> = <span class=\"pl-s1\">htmlDoc</span>.<span class=\"pl-en\">select</span>(<span class=\"pl-s\">\"html &gt; body &gt; form table[class=Lst]\"</span>)\n      .<span class=\"pl-en\">first</span>();\n\n  <span class=\"pl-s1\">Logger</span>.<span class=\"pl-en\">getLogger</span>(<span class=\"pl-smi\">this</span>.<span class=\"pl-en\">getClass</span>().<span class=\"pl-en\">getName</span>())\n      .<span class=\"pl-en\">log</span>(<span class=\"pl-smi\">Level</span>.<span class=\"pl-c1\">INFO</span>,\n          <span class=\"pl-s\">\"tableNotOk found: ''{0}'', tableOk found: ''{1}''\"</span>,\n          <span class=\"pl-k\">new</span> <span class=\"pl-smi\">Object</span>[]{(<span class=\"pl-s1\">tableNotOk</span> != <span class=\"pl-c1\">null</span>), (<span class=\"pl-s1\">tableOk</span> != <span class=\"pl-c1\">null</span>)});\n\n} <span class=\"pl-k\">catch</span> (<span class=\"pl-smi\">UnsupportedCharsetException</span> | <span class=\"pl-smi\">ParseException</span> | <span class=\"pl-smi\">Selector</span>.<span class=\"pl-smi\">SelectorParseException</span> <span class=\"pl-s1\">ex</span>) {\n  <span class=\"pl-s1\">Logger</span>.<span class=\"pl-en\">getLogger</span>(<span class=\"pl-smi\">this</span>.<span class=\"pl-en\">getClass</span>().<span class=\"pl-en\">getName</span>())\n      .<span class=\"pl-en\">log</span>(<span class=\"pl-smi\">Level</span>.<span class=\"pl-c1\">SEVERE</span>,\n          <span class=\"pl-c1\">null</span>,\n          <span class=\"pl-s1\">ex</span>);\n}</pre></div>\n"}